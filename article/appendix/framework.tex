\section{The Framework}\label{app:framework}

The framework used in this work is an improvement on what was used in \cite{biksbois}. A key difference is how the framework used in this work is mad as a command line tool, supporting all languages, where in \cite{biksbois} it was C\# only. The framework is called Biks Diagnostics Energy (BDE), and can be executed in two ways, as seen in \cref{lst:bde_start}, where one is with a configuration, and one is with a path to an executable file. BDE was made as a command line tool, based on assumption that most people interested in using it, would belong to a demographic experienced in using the console.

\input{listings/start-bde.tex}

When the configuration is chose, the parameter \texttt{--config} specifies the location of a valid json of the format seen in \cref{lst:bde_json}. In \cref{lst:bde_json}, it is possible to specify multiple paths to executable files, and assign each executable file with a parameter in \texttt{TestCasePaths} and \texttt{TestCaseParameter} respectively. Information like the \texttt{compiler}, \texttt{language}, ect can also be specified about the test case in the configuration. It is also possible to specify the affinity of the test case through \texttt{AllocatedCores}, where an empty list represents the use of all cores and the list \texttt{1,2} specifies how the test case can only execute on core one and two. When multiple affinities are specified, each test case will be run on both. The temperature limits the test cases should be executed within can also be specified, and lastly, \texttt{AdditionalMetadata} can be used to specify relevant aspects about the experiment, which cannot already be specified through the configuration.

\input{listings/valid_json.tex}

\paragraph*{}
When using the parameters \texttt{--path}, the \texttt{--parameter} is an optional way to provide the executable with parameters. When using BDE this way, a default configuration is set up, containing all fields in the configuration, except \texttt{TestCasePath} and \texttt{TestCaseParameter}. This way of using BDE is based on the assumption that when using BDE, the configuration will in most cases be the same.
\newpage

\input{listings/dut_service.tex}

Since this work use both Windows and Linux, BDE should support both. This is supported by introducing the \texttt{IDutService} seen in \cref{lst:dut_service}, where all OS dependent operations are located. This includes the ability to enable and disable the WiFi, stop background processes, and get the measuring instruments valid for the OS, used for validating the configuration. The \texttt{IDutService} this has an Windows and Linux implementation on BDE where, depending on the OS of the machine BDE is executed on, one of these will be initialized and used.

\input{listings/measuring_instrument.tex}

\paragraph*{}
In addition to multiple OSs, multiple measuring instrument are also supported on BDE. This is supported by inheriting the class \texttt{MeasuringInstrument} for all measuring instrument, and then overriding the necessary methods. \texttt{MeasuringInstrument} implements a start en stop method, and a method to get the data measured between the start and stop. In terms of the virtual methods, each measuring instrument needs to override, these are measuring instrument specific. This includes a start and stop method, and a method to parse the measurement data. In addition to this, it includes a method \texttt{PerformMeasuring}, which is called every 100ms by default. The idea behind this method, is for measuing instruments like RAPL and LHM to make a measurement each time it is called, where for other measuring instruments like IPG, this is done by the measuring instrument itself. The default 100ms interval between samples can be changed by overriding \texttt{GetMiliecondsbetweenSamples}.

\input{listings/perform_measurement.tex}

Following the introduction to the configuration and the measuring instruments, \cref{lst:perform_measurement_bde} shows how BDE performs measurements given the configuration. In the configuration, the burn-in period can be set to any positive integer, where if this value is one, the boolean \texttt{burninApplied} will set to \texttt{true}, and the measurements will be initialized in line $7$. This initialization will, if the results should be uploaded to the database, mean BDE will fetch existing results from the database, where the configuration is the same, and continue where it was left off. Otherwise, and empty list will be returned. If \texttt{burninApplied} is set to \texttt{false}, the amount of burn-in specified in the configuration will be performed before initializing the measurements.

Next, a do-while loop is entered in line $9$, which will execute until the condition \text{EnoughMeasurements} from line $28$ is met. Inside the do-while loop, a cooldown will occur in line, until the DUT is below and above the temperature limits specified in the configuration. Once this that is achieved, the WiFi/Ethernet is disabled, and \texttt{PerformMeasurementsForAllConfigs} will then iterate over all measuring instruments and test cases specified, and perform one measurement for all permutations. After this a few checks are made. If the burn-in period is over, and the configuration states that the results should be uploaded to the database, \texttt{UploadMeasurementsToDatabase} is called. If the burn-in period is not over yet, but \texttt{IsBurninCountAchieved} is true, the measurements are initialized similarly to line $7$, and the boolean $burninIsApplied$ is set to \texttt{true}, indicating that the burn-in period is over, and the measurements are about to be taken. 

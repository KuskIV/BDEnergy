\section{The Framework}\label{app:framework}

The framework used in this work is an extension to \cite{biksbois}, where one key difference is it a command line tool, supporting all languages. The framework is called Biks Diagnostics Energy (BDE) and can be executed in two ways, as seen in \cref{lst:bde_start}, where one is with a configuration, and one is with a path to an executable file.

\input{listings/start-bde.tex}

When using \texttt{--config}, the user specifies a path to a valid json file of the format seen in \cref{lst:bde_json}. Through \cref{lst:bde_json}, it is possible to specify paths to executable files and assign each executable file with a parameter in \texttt{BenchmarkPaths} and \texttt{BenchmarkParameter} respectively. Information like the \texttt{compiler}, \texttt{language}, etc can also be specified about the benchmark in the configuration. It is also possible to specify the affinity of the benchmark through \texttt{AllocatedCores}, where an empty list represents the use of all cores and the list \texttt{1,2} specifies how the benchmark can only execute on core one and two. When multiple affinities are specified, each benchmark will be run on both. Limits for the temperature the benchmarks should be executed within can also be specified, and lastly, \texttt{AdditionalMetadata} can be used to specify relevant aspects about the experiment, which cannot already be specified through the configuration.

\input{listings/valid_json.tex}

\paragraph*{}
When using the parameters \texttt{--path}, the \texttt{--parameter} is an optional way to provide the executable with parameters. When using BDE this way, a default configuration is set up, containing all fields in the configuration, except \texttt{BenchmarkPath} and \texttt{BenchmarkParameter}.
\newpage

\input{listings/dut_service.tex}

Both Windows and Linux is supported on BDE. This is supported through the \texttt{IDutService} seen in \cref{lst:dut_service}, where all OS dependent operations are located. This includes the ability to enable and disable the WiFi, stop background processes, ect. The \texttt{IDutService} has a Windows and Linux implementation on BDE where depending on the OS of the machine BDE is executed on, one of these will be initialized and used.

\input{listings/measuring_instrument.tex}

\paragraph*{}
BDE also supports multiple measuring instruments, through a parent class \texttt{MeasuringInstrument} in \cref{lst:measuring_instrument} the measuring instruments can inherit from. \texttt{MeasuringInstrument} implements a start (line $10$) and stop (line $19$) method, and a method to get the data measured between the start and stop in line $4$. In terms of the virtual methods, each measuring instrument needs to override, these are measuring instruments specific. This includes a start (line $34$) and stop (line $32$) method, a method to parse the measurement data in line $30$ and a method in line $36$ which performs a measurement by default every 100ms by default. The method in line $36$ is made for measuring instruments line RAPL, where an action is required to read the energy consumption.
\newpage

\input{listings/perform_measurement.tex}

\cref{lst:perform_measurement_bde} shows how BDE performs measurements given the configuration. In the configuration, the burn-in period can be set to any positive integer, where if this value is one, the boolean \texttt{burninApplied} will be set to \texttt{true}, and the measurements will be initialized in line $7$. This initialization will, if the results should be uploaded to the database, mean BDE will fetch existing results from the database, where the configuration is the same, and continue where it was left off. Otherwise, an empty list will be returned. If \texttt{burninApplied} is set to \texttt{false}, the amount of burn-in specified in the configuration will be performed before initializing the measurements.

Next, a do-while loop is entered in line $9$, which will execute until the condition \text{EnoughMeasurements} from line $28$ is met. Inside the do-while loop, a cooldown will occur in line $12$, until the DUT is below and above the temperature limits specified in the configuration. Once this is achieved, the WiFi/Ethernet is disabled, and \texttt{PerformMeasurementsForAllConfigs} will then iterate over all measuring instruments and benchmarks specified, and perform one measurement for all permutations. Afterward, a few checks are made. If the burn-in period is over, and the configuration states that the results should be uploaded to the database, \texttt{UploadMeasurementsToDatabase} is called. If the burn-in period is not over yet, but \texttt{IsBurnInCountAchieved} is true, the measurements are initialized similarly to line $7$, and the boolean $burninIsApplied$ is set to \texttt{true}, indicating that the burn-in period is over, and the measurements are about to be taken. 

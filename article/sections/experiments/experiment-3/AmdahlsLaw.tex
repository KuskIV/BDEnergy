\subsection{Estimated Speedup Factor}
We computed and estimation of Amdahl's Law on the 3DM benchmark on DUT 2. To compute Amdahl's law we are required to know the paralizable part of the benchmark. Because we do not have the source code for the benchmark this has to be estimated. Each measurements starts with a time period where the system is essential idle, then 3DM executes, which is followed by another period of the DUT being idle. We assume that the period where 3DM is being executed is the paralizable part of the whole measurement, while the periods before and after are serial. Based on this assumption we gathered estimates of the paralizable and serial parts of the measurement. Then we computed estimated speedup and compared it with the actual speedup.

\input{tables/SpeedupFactor.tex}

On \cref{fig:amdahls} we can see that at after 6 cores Amdahl's estimated speedup factor continuous to increase, while the actual speedup factor stagnates. On this figure the first 6 cores are the P-cores and the last 4 cores are the E-cores. The results show that the E-cores are unable to contribute in speeding up the benchmark. It should be noted that Amdahl's law is intended for processors with identical cores and therefore not the P- and E-core setup. Another factor which may contribute to the stagnation is that the GPU could be the bottleneck. (Perhaps test this by using our GPU).



There is an extension of Amdahl's law to estimate energy consumption by using a fraction for the power the processer uses in idle. We take the average energy consumption in of the whole CPU when idle, and divide 







%\input{tables/results/same-one-api-compiler-different-measuring-instruments-post-update-and-watt/clamp-ipg-lhm-plug-rapl-rapl-scaphandre/mandelbrot/workstationtwo/intel-one-api/CPU_energy_consumption.tex}
%\input{tables/results/same-one-api-compiler-different-measuring-instruments-post-update-and-watt/clamp-ipg-lhm-plug-rapl-rapl-scaphandre/mandelbrot/workstationtwo/intel-one-api/Runtime_duration.tex}

\input{tables/results/same-mi-different-application-post-config-update/ipg/3d-mark/workstationtwo/unkown/CPU_energy_consumption.tex}
\input{tables/results/same-mi-different-application-post-config-update/ipg/3d-mark/workstationtwo/unkown/Runtime_duration.tex}
\input{tables/results/same-mi-different-application-post-config-update/ipg/3d-mark/workstationtwo/unkown/CPU_DEC.tex}



%We can see that after 6 cores the Speedup Factor stagnates and actually slight decreases. This like because the last 4 cores are the E-cores. The decrease could be because the through put of the E cores are lower, which means the P-cores has to wait for them to finish their job.


%\input{tables/results/same-mi-different-application-post-config-update/ipg/3d-mark/workstationtwo/unkown/CPU_energy_consumption.tex}

%C:\Github\BDEnergy\article\tables\results\same-mi-different-application-post-config-update\ipg\3d-mark\workstationtwo\unkown\CPU_energy_consumption.tex

%%%%%%% NEW CALCULATIONS BASED ON AVERAGE %%%%%%%%%%%%%%%%%%
Amdahls law
S(n) = 1/ ((1-p)+p/n)


Parallel start on 1 core = 15 sec
Parallel end on 1 core = 130,86 sec
Benchmark end on1 core: 143.28 sec

Parallel time : 130,86 - 15 = 115,86

Fraction of parallel portion
p = 115,86/ 143,28 = 0,8086264657


AMDAHLS LAW ESTIMATES
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 2)) = 1,6787346222
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 3)) = 2,1695941855
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 4)) = 2,5411013569
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 5)) = 2,8320683114
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 6)) = 3,0661245456
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 7)) = 3,2584795325
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 8)) = 3,4193663866
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 9)) = 3,5559232301
S(n) 1/ ((1-0,8086264657)+ (0,8086264657 / 10)) = 3,6732810342

End times for 2 cores = 90.24
End times for 3 cores = 66.14
End times for 4 cores = 59.45
End times for 5 cores = 51.54
End times for 6 cores = 49.17
End times for 7 cores = 50.84
End times for 8 cores = 48.75
End times for 9 cores = 48.05
End times for 10 cores = 49.17

Actual Speedup
AS for 2 cores = 143,28 / 90,24 = 1,5877659574
AS for 3 cores = 143,28 / 66,14 = 2,1663138796
AS for 4 cores = 143,28 / 59,45 = 2,4100925147
AS for 5 cores = 143,28 / 51,54 = 2,7799767171
AS for 6 cores = 143,28 / 49,17 = 2,9139719341
AS for 7 cores = 143,28 / 50,84 = 2,8182533438
AS for 8 cores = 143,28 / 48,75 = 2,9390769231
AS for 9 cores = 143,28 / 48,05 = 2,9818938606 
AS for 10 cores = 143,28 / 49,17 = 2,9139719341

36,9 j average idle on DUT 2
In watts = 5.5206430099 W

433.51 j average full load FR on DUT 2.
run time 28.6845
In watts 20.2 W

fraction of power consumption of processer in idle k
k = 5,5206430099 / 20,2 = 0,273

Extension formulas

W = (1 + (n-1)k(1-p)) / ((1 - p) + p/n)
W = (1 + (2-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/2) = 1,7664400703
W = (1 + (3-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/3) = 2,3962949728
W = (1 + (4-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/4) = 2,9393806865
W = (1 + (5-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/5) = 3,4239136624
W = (1 + (6-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/6) = 3,8670725446
W = (1 + (7-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/7) = 4,2799146201
W = (1 + (8-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/8) = 4,6698793631
W = (1 + (9-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/9) = 5,0421561883
W = (1 + (10-1)0,273(1-0,8086264657)) / ((1 - 0,8086264657) + 0,8086264657/10) = 5,4004753118

Actual energy consumption in Joules to Watt for DUT 2 on 3DM
1 core 1458.66
Run time = 164,63
8,8602320355 W
Idle = 909,1406800494 j

Idle W = 5,5223269152 W

337 j over 61.025 s
1462 1 core for 164
5,5223269152 W 

2 core 1145.49
Run time = 107,221
10,6834482051 W
Idle W = (Total - DEC) / Run time
Idle = (1145,49 - 814,39) = 331,1  j / / 107,221 =
Idle W = 3,0880144748 W
NEW IDLE: 592,1094141747 J

3 core 1037.39
Run time = 88,115
11,7731373773 W
Idle = 1037,39 - 700,51 = 336,88 j
Idle W = 3,8231856097 W

4 core 989.38
Run time = 79
12,5237974684 W
Idle = 999,3 - 660,22 = 339,08 j
Idle W = 4,2921518987 W

5 core 954.17
Run time = 73,11
13,0511557926 W
Idle = 954,17 - 619,43 = 334,74 j
Idle W = 4,5785802216

6 core 952.83
Run time = 71,13
13,3956136651 W
Idle = 952,83 - 614,37 = 338,46 j
Idle W = 4,7583298186 W

7 core 938.86
Run time = 69,2
13,5673410405 W
Idle = 938,86 - 604,06 = 334,8 j
Idle W = 4,8381502890 W

8 core 925.63
Run time = 67,75
13,6624354244 W
Idle = 925,63 - 593,52 = 332,11 j
Idle W = 4,9019926199 W

9 core 911.19
Run time = 66,64
13,6733193277 W
Idle = 911,19 - 577,7 = 333,49 j
Idle W = 5,0043517407 W

10 core 916.23
Run time = 68,013
13,4713951745 W
Idle 916,23 - 583,56 = 332,67 j 
Idle W = 4,8912707865 W

(Power usage with n cores - idle power usage) / (Power usage with 1 core - idle power usage)
for 2 cores: (10,68 - idle) / (8,86 - idle) =




% %%%%%%%% OLD OLD OLD OLD OLD OLD OLD OLD OLD%%%%%%%%%%%%%%%%%%%%%%%%%%
% Parallel start on 1 core : 19 sec
% Parallel end on 1 core: 130.8 sec
% Benchmark end on 1 core: 141.3 sec

% Ts = 19 + (141,3 - 130,8) = 29,5

% Fraction of the serial portion (S)
% S = 29,5 / 141,3 = 0,2087756546

% Fraction of the parallel portion (P).
% P = 1 - 0,2087756546 = 0,7912243454

% %%%%
% Estimated speed up factor (Sp) for 2 cores
% Sp = 1 / (S + (P / N)) = 
% 1 / (0,2087756546 + (0,7912243454 / 2)) = 1,6545667448

% Actual speed up factor for 2 cores

% Benchmark end on 2 cores: 84,6 sec
% Sp = T_single / T_multi = 141,3 / 84,6 = 1,6702127660

% %%%%

% Estimated speed up factor (Sp) for 3 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 3)) = 2,1163255118

% Actual speed up factor for 3 cores

% Benchmark end on 3 cores: 64,2 sec
% Sp = T_single / T_multi = 141,3 / 64,2 = 2,2009345794

% %%%%

% Estimated speed up factor (Sp) for 4 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 4)) = 2,4595300263

% Actual speed up factor for 4 cores

% Benchmark end on 4 cores: 55,8 sec
% Sp = T_single / T_multi = 141,3 / 55,8 = 2,5322580645

% %%%%

% Estimated speed up factor (Sp) for 5 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 5)) = 2,7246432706

% Actual speed up factor for 5 cores

% Benchmark end on 5 cores: 50,4 sec
% Sp = T_single / T_multi = 141,3 / 50,4 = 2,8035714286

% %%%%

% Estimated speed up factor (Sp) for 6 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 6)) = 2,9355955681

% Actual speed up factor for 6 cores

% Benchmark end on 6 cores: 48,2 sec
% Sp = T_single / T_multi = 141,3 / 48,2 = 2,9315352697

% %%%%

% Estimated speed up factor (Sp) for 7 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 7)) = 3,1074458061

% Actual speed up factor for 7 cores

% Benchmark end on 7 cores: 46,6 sec
% Sp = T_single / T_multi = 141,3 / 46,6 = 3,0321888412

% %%%%

% Estimated speed up factor (Sp) for 8 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 8)) = 3,2501437611

% Actual speed up factor for 8 cores

% Benchmark end on 8 cores: 47,2 sec
% Sp = T_single / T_multi = 141,3 / 47,2 = 2,9936440678

% %%%%

% Estimated speed up factor (Sp) for 9 cores
% Sp = 1 / (0,2087756546 + (0,7912243454 / 9)) = 3,3705274321

% Actual speed up factor for 9 cores

% Benchmark end on 9 cores: 47,5 sec
% Sp = T_single / T_multi = 141,3 / 47,5 = 2,9747368421

% %%%
% Estimated speed up factor (Sp) for 10 cores
% Sp =  1 / (0,2087756546 + (0,7912243454 / 10)) = 3,4734513278

% Actual speed up factor for 2 cores

% Benchmark end on 10 cores: 47,8 sec
% Sp = T_single / T_multi = 141,3 / 47,8 = 2,9560669456
\input{tables/dut-2-exp-3.tex}
\subsection{Experiment Three}\label[subsec]{subsec:exp_three}

The third experiment investigated \cref{RQ:RQ3,RQ:RQ4}, by analyzing what benefit macrobenchmarks gained from additional allocated cores, by executing PCM and 3DM on an increasing number of cores, measured by IPG only. Before this was done, an analysis on the per-core performance of both CPUs was conducted, where the single-core benchmarks introduced in \cref{subsec:test_cases} were used. This allowed a comparison between the energy consumption of the P- and E-cores on DUT 2 and the P-cores on DUT 1. When the measurements were performed, the limit of $1.000$ measurements set in \cref{subsec:exp_two} was still used.

%The benchmark used in this experiment was the single-core benchmarks introduced in \cref{subsec:test_cases}, by running each benchmark on one core at a time, while measuring the energy consumption using IPG and Clamp. This will show how the performance is between P- and E-cores, and how the performance is between cores with the same specifications.


\paragraph{Per-Core Initial Measurements:} An initial $250$ measurements were made for each benchmark on each core, on both DUTs. After, Cochran's formula was applied to the result to determine if more measurements were required. The results from this was presented in \cref{app:exp_three_coch}.


%The first measurements were made, will be in order to compare the per-core performance, where $250$ measurements will be made for each benchmark on each core. After $250$ measurements, more measurements were made where it was required, as can be found in \cref{app:exp_three_coch}, with an upper limit of $1000$ measurements.


\input{tables/dut-2-exp-3-nb.tex}

\paragraph{Per-Core Results:} For the per-core results, the analysis was based primarily on DUT 2, with results from DUT 1 presented in \cref{app:exp_three}. When comparing the difference in performance between P- and E cores, the results were illustrated in \cref{tab:dut-2-exp-3-sn} for SN, and in \cref{tab:dut-2-exp-3-nb} for NB. for both SN and NB, E cores were observed to have a higher execution time and lower DEC per second compared to P cores, where the DEC was higher for P cores on NB, while it was lower for SN.

\input{tables/exp-3-cores-different-performance.tex}

When comparing how much performance could differ between cores of the same type, on the same CPU, \cref{tab:dut-2-exp-3-std-and-avg} illustrated the average energy consumption and how much it deviated. \cref{tab:dut-2-exp-3-std-and-avg} illustrated DUT 1 deviates more, with the highest deviation for NB, while the lowest was for DUT 2, on P cores for SN.

% When comparing different cores on the same CPU, the largest difference was found on DUT 1 with benchmark NB, where the performance was $11.61\%$ worse on core $1$ than core $6$, while The smallest difference was found on DUT 2, benchmark NB on a E core, where the energy consumption was $1.17\%$ higher on core $6$ than core $9$.


% \cref{tab:dut-2-exp-3-sn} illustrated a higher difference between the DEC ($-93.59\%$) than the total energy consumption ($-70.45\%$) between P- and E cores. This is a result of DEC excluding the idle energy consumption from the measurements, resulting in lower values, but a larger percent difference. %When comparing  P- and E-cores, the execution time is on average is $76.26\%$ lower on P cores, the energy consumption is $70.44\%$ lower on P cores over the entire execution time, while E cores has a $72.88\%$ lower energy consumption per second.
% The largest difference between two cores of the same type was found on DUT 1 with benchmark NB, where the performance was $11.61\%$ worse on core 1 than core 6. The smallest difference was found on DUT 2, benchmark NB on a E core, where the energy consumption was $1.17\%$ higher on core $6$ than core $9$.


%When comparing cores of the same type, the largest difference between the best and worst performing core was found on DUT 2, with benchmark NB, 



% dut 1, NB: 11.61 2 and 7
% dut 1, SN: 2.5
% dut 2, NB: E:3.38, P: 1.17
% dut 2, SN: E: 1.26, P:2.35
\input{tables/experiment-3/app-3-x-axis-dut-2-3dm.tex}

\paragraph*{Macrobenchmark Initial Measurements:} following the analysis of the per-core performance, the two macrobenchmarks introduced in \cref{subsec:test_cases} were executed on an increasing number of cores, starting from the most efficient one. An initial $30$ measurements were made, as the per-core experiment illustrated how $250$ were too many for DUT 2, illustrated in \cref{app:exp_three_coch}. The initial idea was to start at one core, which was done for 3DM on both DUTs and PCM on DUT 1. On DUT 2, PCM could not execute web browsing on a single core, and was unable to execute spreadsheet and photo editing for unknown reasons. Because of this, DUT 2 started at 2 cores to include web browsing. For DUT 1, web browsing was unable to execute, so this scenario was excluded for this DUT. Despite attempts, no solution was found to why PCM was unable to execute certain scenarios on few cores, as no error logs were created when the error occurred and the error was presented as an unknown error by PCM. After the initial $30$ measurements, Cochran's formula was applied to the measurements, to ensure enough measurements were made. The amount of required measurements was presented in \cref{app:exp_three_coch_app}.

\input{tables/experiment-3/app-3-x-axis-dut-2-pcm.tex}

\paragraph*{Macrobenchmark Results:} The results for DUT 2 was illustrated in \cref{fig:exp_3_dut_2_3dm_result} and \cref{fig:exp_3_dut_2_pcm_result} for 3DM and PCM respectively, and for DUT 1 in \cref{app:app_exp_three}.

For both DUTs and macrobenchmarks, a similar observation was made, where the execution time decreased and the DEC per second increased as more cores were allocated, while the DEC remained the same. A difference between 3DM and PCM was how the execution time decreased more for 3DM than for PCM, which was because PCM included scenarios only utilizing a single thread. This meant that only a part of the benchmarks could benefit from the additional allocated cores. For 3DM, the benchmark itself was embarrassingly parallel, but the measurements included a startup and shutdown period which was not parallel. An additional analysis of the energy consumption over time by PCM and 3DM was analyzed more in-depth in \cref{app:timeseries}.

\input{tables/results/compare-p-and-e-cores-on-pcmark-without-boost/ipg/pc-mark-10/workstationtwo/unkown/CPU_DEC.tex}

\paragraph{P vs. E Initial Measurements:} when executing macrobenchmarks on an increasing number of cores, it was difficult to illustrate how P cores perform against E cores. This experiment therefore explores how P and E cores compares, when executing macrobenchmarks. This was achieved by running PCM on four cores, either with four P cores (4P), four E cores (4E) or two of each (2P2E). PCM was chosen as it represented a usecase with lowe CPU usage, where some jobs were of lower priority, which could see the DEC reduced, when E cores were available. For this experiment, $30$ initial measurements were made, and additional were made after Cochran's formula was applied to the results, if required. The required measurements were presented in \cref{app:p-vs-e}.

\input{tables/results/compare-p-and-e-cores-on-pcmark-without-boost/ipg/pc-mark-10/workstationtwo/unkown/Runtime_duration.tex}

\paragraph{P vs. E Results:} The results for the execution time and DEC are illustrated in \cref{fig:3-compare-p-and-e-cores-on-pcmark-without-boost-ipg-pc-mark-10.exe-unkown-workstationtwo-runtime-duration} and  \cref{fig:3-compare-p-and-e-cores-on-pcmark-without-boost-ipg-pc-mark-10.exe-unkown-workstationtwo-cpu-dec} respectively, while the DEC per second was presented in \cref{app:bonus-results}. For the DEC, 4E used the least energy, while 4P and 2P2E used $17.40\%$ and $13.28\%$ more energy respectively. For execution time, the order was the opposite, where 4P had the lowest execution time, where 2P2E and 4E executed $3.74\%$ and $29.52\%$ slower respectively. This illustrated the use case of E cores, where a lower energy consumption could be achieved, given a higher execution time.  


\paragraph{Estimated Speedup and Actual Speedup:}
An additional analysis conducted was by comparing the actual speedup when executing on more cores, against an estimate provided by Amdahl's law. This analysis was conducted in \cref{app:Amdahls}, where it was found that the estimation followed the actual speedup closely, until the E-cores were used. The actual speedup showed that the E-cores do not contribute with a speedup of the 3DM benchmark.
% When looking at the DEC and execution time, 4E had a higher execution time and DEC, while 4P has the lowest. When combining P- and E cores, the execution time was $3.8\%$ higher and the DEC was $0.23\%$ higher compared to 4P. While this still showed that P cores performed best, it also showed an almost equivalent performance despite two cores having a lower frequency.


%% pcmark for dut 1: video conf, web brows, spredsheets, photo edit, video edit, render
%% pcmark for dut 2: video conf, web brows, vidoe editing, render
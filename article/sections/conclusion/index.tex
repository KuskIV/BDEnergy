\section{Conclusion}\label[section]{conclusion and Future Work}

This work set out to explore parallelism and the effects it has on energy consumption, where Windows is used as the primary OS with Linux as a reference point, and Cochran's formula to ensure confidence in the reported numbers. With Cochrans formula, it is found that more measurements are required in order to gain confidence in measurements than are generally found in existing work. When looking at OSs, while Windows will provide valuable depth to any analysis about energy consumption as similar observations are not guaranteed between OSs, Linux is overall the easier choice in this domain. This is because Linux is a more minimalist OS with less pre-installed software and background processes. In this domain, reaching definitive conclusions has proven to be challenging as the performance has found to be very OS, hardware and compiler dependent.

%% RQ1: c++ compler
Since RAPL is not available on Windows, alternatives are compared on C++ microbenchmarks, compiled on the most energy efficient compiler. The most energy efficient C++ compiler is found through the first experiment, where tests shows that there is a big difference in performance between compilers. The most energy efficient compiler is found be Intel's oneAPI, because of its utilization of AVX, for parallelism, and other optimizations, such a loop unrolling.

%because of its use of parallelism and \texttt{ymm} registers, only found on Intel CPUs.

%% RQ2: measuring instruments
When comparing microbenchmarks compiled on oneAPI between different measuring instruments for Windows, a similar performance is found when comparing each measuring instruments correlation with a ground truth obtained by a current clamp. This is expected the be the cause of all measuring instruments utilizing the same registers when reporting the energy consumption, but is something to look into in a future work. In the end, Intel Power Gadget is chosen, because of its usability compared to other measuring instruments. In a future work it could be interesting to extend this analysis to include things like the overhead of the measuring instruments for Windows, to see how they compare to RAPL.

%% RQ4: Effect of P- and E- cores
In the third experiment, the performance of P- and E were analyzed, which showed a lower duration and DEC for P cores but a higher DEC per second compared to E cores. This shows that for most workloads, the P cores are preferred. The intended workload for E cores is small non-critical jobs, which is not covered in this work, which could be interesting in a future work, to really see if E cores delivers the promised efficiencies.

%% RQ3: the effect parallelism has on energy consumption
In the third experiment parallelism and its effect on energy consumption is explored on two macrobenchmarks, this being PC-Mark-10 and 3D-Mark, where one represents a realistic usecase of videochats and web browsing, while the other simulates a more demanding workload. Both macrobenchmarks were executed on an increasing number of cores, to find what performance benefit the additional cores bring. For both macrobenchmarks a relationship is found between the DEC, duration and DEC per second, where as more cores are allocated, the duration and DEC decreases, while the DEC per second increases, with a diminishing return. The relationship is however non-linear, where the duration decreases by more than the DEC which illustrates diminishing return. This diminishing return means that at a certain number of cores, additional cores will have no notable effect on the duration or the DEC, where this number of cores will be higher for a more demanding workloads.


